<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-spring4-4.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org" th:lang="${#locale.language}">
<head th:include="common/head::head">
</head>
<body th:attr="data-focus-element-id=${focusElementId?:''}">
	<header>
		<div th:include="common/navbar::navbar"></div>
		<div
			th:include="common/jumbotron::jumbotron(title=#{variables.modify.title},subtitle=#{variables.modify.subtitle})"></div>
	</header>
	<div class="container">
		<div class="panel panel-primary">
			<div class="panel-heading" th:text="#{variables.modify.variableData}">Variableninformationen</div>
			<div class="panel-body">
				<!-- Bootstrap form -->
				<form action="#" th:action="${resource.saveLink}"
					th:attr="data-validate-url=${resource.validateLink}"
					th:object="${variableDocument}" method="post" role="form" id="form"
					oninput="VariableModifyForm.validate(this)">
					<div th:replace="common/errorAlerts::globalAlerts(field=global)"></div>
					<div class="row">
						<div class="col-md-6">
								<div
									th:replace="common/inputs::input(field=id,label=#{variables.modify.variable.id},placeholder=#{variables.modify.variable.id},type=text,readonly=${!resource.createMode})"></div>
						</div>							
					</div>
					<div class="row">
						<div class="col-md-6">
							<div
								th:replace="common/inputs::input(field=name,label=#{variables.modify.variable.name},placeholder=#{variables.modify.variable.name},type=text,readonly=false)"></div>
						</div>
						<div class=" col-md-6">
							<div
								th:replace="common/inputs::input(field=label,label=#{variables.modify.variable.label},placeholder=#{variables.modify.variable.label},type=text,readonly=false)"></div>
						</div>
					</div>
					<div class="row">
						<div class=" col-md-6">
							<div
								th:replace="common/inputs::select(field=dataType,label=#{variables.modify.variable.dataType},valuesMap=dataTypesMap,readonly=false)"></div>
						</div>
						<div class=" col-md-6">
							<div
								th:replace="common/inputs::select(field=scaleLevel,label=#{variables.modify.variable.scaleLevel},valuesMap=scaleLevelMap,readonly=false)"></div>
						</div>
					</div>
					<div class="row">
						<div class=" col-md-12">
							<div
								th:replace="common/inputs::textarea(field=question,label=#{variables.modify.variable.question},placeholder=#{variables.modify.variable.question},rows=4,readonly=false)"></div>
						</div>
					</div>
					<div class="panel panel-primary">
						<div class="panel-heading"
							th:text="#{variables.modify.variable.answerOptions}">Antwortoptionen</div>
						<div class="panel-body">
							<div
								th:replace="common/errorAlerts::globalAlerts(field=answerOptions)"></div>
							<div th:each="answerOption, rowStat : *{answerOptions}"
								class="row">
								<div class="col-md-5">
									<div
										th:replace="common/inputs::input(field=answerOptions[__${rowStat.index}__].code,label=#{variables.modify.variable.answerOption.code},placeholder=#{variables.modify.variable.answerOption.code},type=text,readonly=false)"></div>
								</div>
								<div class="col-md-5">
									<div
										th:replace="common/inputs::input(field=answerOptions[__${rowStat.index}__].label,label=#{variables.modify.variable.answerOption.label},placeholder=#{variables.modify.variable.answerOption.label},type=text,readonly=false)"></div>
								</div>
								<div class="col-md-2">
									<div
										th:replace="common/buttons::removeButtonSmall(index=${rowStat.index})">
									</div>
								</div>
							</div>
							<a id="addAnswerOption"></a>
							<button
								th:replace="common/buttons::addButton(id=addAnswerOptionButton,name=addAnswerOption)"></button>
						</div>
					</div>
					<div class="panel panel-primary">
						<div class="panel-heading"
							th:text="#{variables.modify.variable.surveyData}">Erhebungsdaten</div>
						<div class="panel-body">
							<th:block th:if="${variableDocument.variableSurvey != null}">
								<!-- 	th:object="${variableDocument.variableSurvey}"> -->
								<div
									th:replace="common/errorAlerts::globalAlerts(field=variableSurvey)"></div>
								<div class="row">
									<div class=" col-md-6">
										<div
											th:replace="common/inputs::input(field=variableSurvey.surveyId,label=#{variables.modify.variable.survey.id},placeholder=#{variables.modify.variable.survey.id},type=text,readonly=false)"></div>
									</div>
								</div>
								<div class="row">
									<div class=" col-md-6">
										<div
											th:replace="common/inputs::input(field=variableSurvey.title,label=#{variables.modify.variable.survey.title},placeholder=#{variables.modify.variable.survey.title},type=text,readonly=false)"></div>
									</div>
								</div>
								<div class="row">
									<div class=" col-md-6">
										<div
											th:replace="common/inputs::input(field=variableSurvey.variableAlias,label=#{variables.modify.variable.survey.variableAlias},placeholder=#{variables.modify.variable.survey.variableAlias},type=text,readonly=false)"></div>
									</div>
								</div>
								<div class="row">
									<div class=" col-md-12">
										<div class="panel panel-primary">
											<div class="panel-heading"
												th:text="#{variables.modify.variable.survey.period}">Erhebungszeitraum</div>
											<div class="panel-body">
												<div
													th:replace="common/errorAlerts::globalAlerts(field=variableSurvey.surveyPeriod)"></div>
												<div class="col-md-6">
													<div
														th:replace="common/inputs::input(field=variableSurvey.surveyPeriod.startDate,label=#{variables.modify.variable.survey.period.start},placeholder=#{variables.modify.variable.survey.period.start},type=date,readonly=false)"></div>
												</div>
												<div class="col-md-6">
													<div
														th:replace="common/inputs::input(field=variableSurvey.surveyPeriod.endDate,label=#{variables.modify.variable.survey.period.end},placeholder=#{variables.modify.variable.survey.period.end},type=date,readonly=false)"></div>
												</div>
											</div>
										</div>
									</div>
								</div>
								<button
									th:replace="common/buttons::removeButton(id=removeSurveyButton,name=removeSurvey)">Remove</button>
							</th:block>
							<th:block th:if="${variableDocument.variableSurvey == null}">
								<button
									th:replace="common/buttons::addButton(id=addSurveyButton,name=addSurvey)"></button>
							</th:block>
						</div>
					</div>
					<div>
						<button th:replace="common/buttons::saveButton"></button>
						<a th:replace="common/buttons::cancelButton">Cancel</a>
					</div>
				</form>
			</div>
		</div>
	</div>
	<div th:include="common/js_libraries::js"></div>
	<script src="/js/variables/modify.js"></script>
</body>
</html>
