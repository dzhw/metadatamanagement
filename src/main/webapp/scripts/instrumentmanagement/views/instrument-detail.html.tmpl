<div ng-if="ctrl.instrument.$resolved && ctrl.instrument.id">
    <div layout="row" style="margin-bottom: 0px;" layout-margin>
        <h1 class="md-headline" style="margin-left: 0px;">{{ctrl.instrument.description[currentLanguage]}} <span class="label label-as-badge label-default">{{ctrl.instrument.id}}</span></h1>
    </div>
    <div layout="column" layout-gt-sm="row">
      <div flex-gt-sm="50" layout="column">
        <md-card flex="auto">
          <md-card-header>
            <md-card-header-text>
              <h2 class="md-title">{{'global.cards.details' | translate }}</h2>
            </md-card-header-text>
          </md-card-header>
          <md-divider></md-divider>
          <md-card-content>
            <div style="margin-bottom: 0.5em;" ng-if="ctrl.instrument.title">
              <span style="font-weight: bold;">{{'instrument-management.detail.title' | translate }}:
              </span>
              <span>{{ctrl.instrument.title[currentLanguage]}}</span>
            </div>
            <div style="margin-bottom: 0.5em;" ng-if="ctrl.instrument.type">
              <span style="font-weight: bold;">{{'instrument-management.detail.type' | translate }}:
              </span>
              <span>{{ctrl.instrument.type}}</span>
            </div>
          </md-card-content>
        </md-card>
      </div>
      <div flex-gt-sm="50" layout="column">
        <md-card flex="auto" ng-class="{'fdz-reset-left-margin': $mdMedia('gt-sm'), 'fdz-reset-top-margin': $mdMedia('sm') || $mdMedia('xs')}">
          <md-card-header>
            <md-card-header-text>
              <h2 class="md-title">{{'global.cards.related-objects' | translate }}</h2>
            </md-card-header-text>
          </md-card-header>
          <md-divider></md-divider>
          <md-card-content>
            <div style="margin-bottom: 0.5em; width: 100%;" layout="row">
              <div ng-if="!ctrl.study" class="fdz-truncate-string" flex>
                <md-icon md-svg-src="/assets/images/icons/study.svg"></md-icon>
                {{'study-management.detail.study' | translate }}: {{'global.messages.error.unavailable' | translate}}
              </div>
              <div ng-if="ctrl.study" class="fdz-truncate-string" flex>
                <a ui-sref="studyDetail({id: ctrl.study.id})">
                  <md-icon md-svg-src="/assets/images/icons/study.svg"></md-icon>
                  {{'study-management.detail.study' | translate }}: {{ctrl.study.title[currentLanguage]}}</a>
                </div>
              </div>
              <div style="margin-bottom: 0.5em; width: 100%;" layout="row">
                <div ng-if="ctrl.surveyCount == 0" class="fdz-truncate-string" flex>
                  <md-icon md-svg-src="/assets/images/icons/survey.svg"></md-icon>
                  {{'survey-management.detail.surveys' | translate }}: {{'global.messages.error.unavailable' | translate}}
                </div>
                <div ng-if="ctrl.surveyCount == 1" class="fdz-truncate-string" flex>
                  <a ui-sref="surveyDetail({'id': ctrl.survey.id})">
                    <md-icon md-svg-src="/assets/images/icons/survey.svg"></md-icon>
                    {{'survey-management.detail.survey' | translate }}: {{ctrl.survey.title[currentLanguage]}}</a>
                  </div>
                  <div ng-if="ctrl.surveyCount > 1" class="fdz-truncate-string" flex>
                    <a ui-sref="search({'type': 'surveys', 'instrument':ctrl.instrument.id, 'page': 1})">
                      <md-icon md-svg-src="/assets/images/icons/survey.svg"></md-icon>
                      {{'survey-management.detail.surveys' | translate }}: ({{ctrl.surveyCount}})</a>
                    </div>
                  </div>
                  <div style="margin-bottom: 0.5em; width: 100%;" layout="row">
                    <div ng-if="ctrl.questionCount == 0" class="fdz-truncate-string" flex>
                      <md-icon md-svg-src="/assets/images/icons/question.svg"></md-icon>
                      {{'question-management.detail.questions' | translate }}: {{'global.messages.error.unavailable' | translate}}
                    </div>
                    <div ng-if="ctrl.questionCount == 1" class="fdz-truncate-string" flex>
                      <a ui-sref="questionDetail({'id': ctrl.question.id})">
                        <md-icon md-svg-src="/assets/images/icons/question.svg"></md-icon>
                        {{'question-management.detail.question' | translate }}: {{ctrl.question.questionText[currentLanguage]}}</a>
                      </div>
                      <div ng-if="ctrl.questionCount > 1" class="fdz-truncate-string" flex>
                        <a ui-sref="search({'instrument': ctrl.instrument.id, 'type': 'questions', 'sort-by': 'number', 'page': 1})">
                          <md-icon md-svg-src="/assets/images/icons/question.svg"></md-icon>
                          {{'question-management.detail.questions' | translate }}: ({{ctrl.questionCount}})</a>
                        </div>
                      </div>
                      <div style="margin-bottom: 0.5em; width: 100%;" layout="row">
                        <div ng-if="ctrl.publicationCount == 0" class="fdz-truncate-string" flex>
                          <md-icon md-svg-src="/assets/images/icons/related-publication.svg"></md-icon>
                          {{'related-publication-management.detail.publications' | translate }}: {{'global.messages.error.unavailable' | translate}}
                        </div>
                        <div ng-if="ctrl.publicationCount == 1" class="fdz-truncate-string" flex>
                          <a ui-sref="relatedPublicationDetail({'id': ctrl.relatedPublication.id})">
                            <md-icon md-svg-src="/assets/images/icons/related-publication.svg"></md-icon>
                            {{'related-publication-management.detail.publication' | translate }}: {{ctrl.relatedPublication.title}}</a>
                          </div>
                          <div ng-if="ctrl.publicationCount > 1" class="fdz-truncate-string" flex>
                            <a ui-sref="search({'type': 'related_publications', 'instrument': ctrl.instrument.id, 'page': 1})">
                              <md-icon md-svg-src="/assets/images/icons/related-publication.svg"></md-icon>
                              {{'related-publication-management.detail.publications' | translate }}: ({{ctrl.publicationCount}})</a>
                            </div>
                          </div>
                        </md-card-content>
        </md-card>
      </div>
    </div>
    <div layout="row">
        <md-card ng-if="ctrl.attachments" flex class="fdz-reset-top-margin">
            <md-card-header layout-align="center center">
                <md-card-header-text>
                    <h2 class="md-title">{{'instrument-management.detail.attachments.table-title' | translate }}</h2>
                </md-card-header-text>
            </md-card-header>
            <table class="fdz-table">
                <thead>
                    <tr>
                        <th>{{'instrument-management.detail.attachments.title' | translate }}
                            <md-tooltip hide-gt-xs md-direction="right">
                                {{'instrument-management.detail.attachments.title' | translate }}
                            </md-tooltip>
                        </th>
                        <th>{{'instrument-management.detail.attachments.description' | translate }}
                          <md-tooltip hide-gt-xs md-direction="right">
                            {{'instrument-management.detail.attachments.description' | translate }}
                          </md-tooltip>
                        </th>
                        <th>{{'instrument-management.detail.attachments.type' | translate }}
                            <md-tooltip hide-gt-xs md-direction="right">
                                {{'instrument-management.detail.attachments.type' | translate }}
                            </md-tooltip>
                        </th>
                        <th>{{'instrument-management.detail.attachments.language' | translate }}
                            <md-tooltip hide-gt-xs md-direction="right">
                                {{'instrument-management.detail.attachments.language' | translate }}
                            </md-tooltip>
                        </th>
                        <th>{{'instrument-management.detail.attachments.file' | translate }}
                            <md-tooltip hide-gt-xs md-direction="right">
                                {{'instrument-management.detail.attachments.file' | translate }}
                            </md-tooltip>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="row in ctrl.attachments">
                        <td>{{row.title}}&nbsp;</td>
                        <td>{{row.description[currentLanguage]}}&nbsp;</td>
                        <td>{{row.type[currentLanguage]}}&nbsp;</td>
                        <td>{{row.language | LanguageFilter: currentLanguage}}&nbsp;</td>
                        <td>
                            <a ng-href="{{row.id}}" target="_blank">{{row.fileName}}</a>&nbsp;</td>
                    </tr>
                </tbody>
            </table>
        </md-card>
    </div>
</div>
